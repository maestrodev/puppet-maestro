{
    "compositions": [
        {
            "id": 13,
            "name": "Centrepoint Release",
            "description": "Cut an artifact release",
            "schedule": "",
            "state": null,
            "agent_facts": {},
            "reuse_agent": true,
            "created_at": "2012-04-17T06:21:09+10:00",
            "updated_at": "2012-04-17T06:21:09+10:00",
            "agent_pool_id": null,
            "on_error_id": null,
            "fail_type_id": 1,
            "composition_tasks": [
                {
                    "id": 94,
                    "options": {"path":{"value":"<%= agent_home_dir %>/wc/centrepoint","required":true,"type":"String"},"branch":{"value":"master","required":false,"type":"String"},"url":{"value":"https://github.com/maestrodev/centrepoint.git","required":true,"type":"Url"},"clean_working_copy":{"required":false,"type":"Boolean","value":false}},
                    "position": 1,
                    "name": "git clone",
                    "created_at": "2012-04-17T06:27:28+10:00",
                    "updated_at": "2012-04-18T03:13:04+10:00",
                    "composition_id": 13,
                    "task_id": 1,
                    "sources": []
                },
                {
                    "id": 121,
                    "options": {"command_string":{"value":"if [  ! -d <%= agent_home_dir %>/wc/git ]\\n then\\n mkdir <%= agent_home_dir %>/wc/git \\n fi\\n cd <%= agent_home_dir %>/wc/git\\n if [ -d <%= agent_home_dir %>/wc/git/centrepoint ]\\n then\\n rm -rf centrepoint \\nfi\\ngit clone file://localhost<%= agent_home_dir %>/wc/centrepoint","required":true,"type":"String"},"environment":{"required":false,"type":"String","value":""}},
                    "position": 2,
                    "name": "shell execute",
                    "created_at": "2012-04-18T01:01:21+10:00",
                    "updated_at": "2012-04-18T03:13:04+10:00",
                    "composition_id": 13,
                    "task_id": 28,
                    "sources": []
                },
                {
                    "id": 96,
                    "options": {"goals":{"value":["versions:set -DnewVersion=1.2","versions:commit"],"type":"Array","required":true},"environment":{"value":"","type":"String","required":false},"path":{"value":"<%= agent_home_dir %>/wc/git/centrepoint/centrepoint","type":"String","required":true},"profiles":{"value":[],"type":"Array","required":false},"properties":{"value":[],"type":"Array","required":false},"settingsfile":{"value":"","type":"String","required":false}},
                    "position": 3,
                    "name": "maven",
                    "created_at": "2012-04-17T06:27:28+10:00",
                    "updated_at": "2012-04-18T03:13:04+10:00",
                    "composition_id": 13,
                    "task_id": 25,
                    "sources": []
                },
                {
                    "id": 95,
                    "options": {"command_string":{"value":"cd <%= agent_home_dir %>/wc/git/centrepoint; git commit -am 'demo release'","type":"String","required":true},"environment":{"required":false,"type":"String","value":""}},
                    "position": 4,
                    "name": "shell execute",
                    "created_at": "2012-04-17T06:27:28+10:00",
                    "updated_at": "2012-04-18T03:13:04+10:00",
                    "composition_id": 13,
                    "task_id": 28,
                    "sources": []
                },
                {
                    "id": 97,
                    "options": {"message":{"value":"demo-release tag to 1.2","type":"String","required":false},"remote_branch":{"value":"master","type":"String","required":true},"remote_repo":{"value":"origin","type":"String","required":true},"path":{"value":"<%= agent_home_dir %>/wc/git/centrepoint","type":"String","required":true},"commit checksum":{"value":"","type":"String","required":false},"tag_name":{"value":"demo-release-1.2","type":"String","required":true}},
                    "position": 5,
                    "name": "git tag",
                    "created_at": "2012-04-17T06:27:28+10:00",
                    "updated_at": "2012-04-18T03:13:04+10:00",
                    "composition_id": 13,
                    "task_id": 3,
                    "sources": []
                },
                {
                    "id": 99,
                    "options": {"goals":{"value":["--batch-mode deploy -DaltDeploymentRepository=maestro-deploy::default::http://localhost:8082/archiva/repository/Test.Project.releases"],"required":true,"type":"Array"},"environment":{"value":"","required":false,"type":"String"},"path":{"value":"<%= agent_home_dir %>/wc/git/centrepoint/centrepoint","required":true,"type":"String"},"properties":{"value":[],"required":false,"type":"Array"},"profiles":{"value":[],"required":false,"type":"Array"},"settingsfile":{"value":"","required":false,"type":"String"}},
                    "position": 6,
                    "name": "maven",
                    "created_at": "2012-04-17T06:27:28+10:00",
                    "updated_at": "2012-04-18T03:13:05+10:00",
                    "composition_id": 13,
                    "task_id": 25,
                    "sources": []
                },
                {
                    "id": 98,
                    "options": {"goals":{"value":["versions:set -DnewVersion=1.3-SNAPSHOT","versions:commit"],"type":"Array","required":true},"environment":{"value":"","type":"String","required":false},"path":{"value":"<%= agent_home_dir %>/wc/git/centrepoint/centrepoint","type":"String","required":true},"profiles":{"value":[],"type":"Array","required":false},"properties":{"value":[],"type":"Array","required":false},"settingsfile":{"value":"","type":"String","required":false}},
                    "position": 7,
                    "name": "maven",
                    "created_at": "2012-04-17T06:27:28+10:00",
                    "updated_at": "2012-04-18T03:13:04+10:00",
                    "composition_id": 13,
                    "task_id": 25,
                    "sources": []
                },
                {
                    "id": 93,
                    "options": {"command_string":{"value":"cd <%= agent_home_dir %>/wc/git/centrepoint; git commit -am 'bump to next snapshot'","required":true,"type":"String"},"environment":{"required":false,"type":"String","value":""}},
                    "position": 8,
                    "name": "shell execute",
                    "created_at": "2012-04-17T06:27:28+10:00",
                    "updated_at": "2012-04-18T03:13:04+10:00",
                    "composition_id": 13,
                    "task_id": 28,
                    "sources": []
                }
            ],
            "fail_type": "fast",
            "on_error_composition": null,
            "tasks": [
                {
                    "id": 1,
                    "name": "git clone",
                    "description": "Clone A Git Repository <br>[path] Is The Local Path<br>[url] Remote Location Of The Git Repositiory<br>[branch] Branch Of The Repository To Checkout",
                    "position": 1,
                    "options": {"path":{"required":true,"type":"String","value":""},"url":{"required":true,"type":"Url","value":""},"branch":{"required":false,"type":"String","value":""},"clean_working_copy":{"required":false,"type":"Boolean","value":false}},
                    "type": "remote",
                    "command": "/git/clone",
                    "tool_name": "SCM",
                    "code": null,
                    "klass": null,
                    "dependencies": null,
                    "language": null,
                    "pom": null,
                    "created_at": "2011-08-05T08:31:28+10:00",
                    "updated_at": "2012-04-14T05:51:14+10:00",
                    "plugin_id": null
                },
                {
                    "id": 3,
                    "name": "git tag",
                    "description": "Create A Tag And Push It To A Remote Repo <br>[path] Is The Local Path<br>[tag_name] Name Of The New Branch<br>[remote_repo] Alias For The Remote Repository (origin)<br>[remote_branch] Name Of The Remote Branch (master)<br>[message] Commit Message<br>[commit checksum] Checksum For the Commit",
                    "position": 1,
                    "options": {"path":{"required":true,"type":"String","value":""},"tag_name":{"required":true,"type":"String","value":""},"commit checksum":{"required":false,"type":"String","value":""},"message":{"required":false,"type":"String","value":""},"remote_repo":{"required":true,"type":"String","value":"origin"},"remote_branch":{"required":true,"type":"String","value":"master"}},
                    "type": "remote",
                    "command": "/git/tag",
                    "tool_name": "SCM",
                    "code": null,
                    "klass": null,
                    "dependencies": null,
                    "language": null,
                    "pom": null,
                    "created_at": "2011-08-05T08:31:28+10:00",
                    "updated_at": "2012-04-14T05:51:14+10:00",
                    "plugin_id": null
                },
                {
                    "id": 25,
                    "name": "maven",
                    "description": "Run A Specified Set Of Maven Goals <br>[path]  Location To Run Maven <br>[goals] Set of Maven goals<br>[environment] Environment Variables <br>[path] Local Path To Files <br>[settings.xml] Location of a Maven settings.xml file",
                    "position": 1,
                    "options": {"path":{"required":true,"type":"String","value":""},"goals":{"required":true,"type":"Array","value":[]},"environment":{"required":false,"type":"String","value":""},"settingsfile":{"required":false,"type":"String","value":""},"profiles":{"required":false,"type":"Array","value":[]},"properties":{"required":false,"type":"Array","value":[]}},
                    "type": "remote",
                    "command": "/maven/execute",
                    "tool_name": "Shell",
                    "code": null,
                    "klass": null,
                    "dependencies": null,
                    "language": null,
                    "pom": null,
                    "created_at": "2011-10-15T09:31:29+11:00",
                    "updated_at": "2012-04-14T05:51:21+10:00",
                    "plugin_id": null
                },
                {
                    "id": 28,
                    "name": "shell execute",
                    "description": "Execute A Shell Command Locally <br>[command_string] String Of Shell Commands ",
                    "position": 5,
                    "options": {"command_string":{"required":true,"type":"String","value":""},"environment":{"required":false,"type":"String","value":""}},
                    "type": "remote",
                    "command": "/shell/execute",
                    "tool_name": "Shell",
                    "code": null,
                    "klass": null,
                    "dependencies": null,
                    "language": null,
                    "pom": null,
                    "created_at": "2011-08-23T08:57:59+10:00",
                    "updated_at": "2012-04-14T05:51:21+10:00",
                    "plugin_id": null
                }
            ],
            "sources": []
        },
        {
            "agent_facts": {},
            "agent_pool_id": null,
            "composition_tasks": [
                {
                    "composition_id": 7,
                    "created_at": "2011-10-06T15:48:24-04:00",
                    "id": 107,
                    "name": "jenkins plugin",
                    "options": {
                        "port":{"value":"<%= jenkins_port %>","type":"Integer","required":true},
                        "host":{"value":"<%= jenkins_host %>","type":"String","required":true},
                        "scm_url":{"value":"https://github.com/maestrodev/centrepoint.git","type":"Url","required":true},
                        "job":{"value":"Centrepoint","type":"String","required":true},
                        "steps":{"value":["mvn clean -U --batch-mode","mvn <%= goal %> -U --batch-mode -DrepositoryId=maestro-deploy -Durl=http://<%= archiva_host %>:<%= archiva_port %>/archiva/repository/all -DaltDeploymentRepository=maestro-deploy::default::http://<%= archiva_host %>:<%= archiva_port %>/archiva/repository/snapshots -Dproject.repository.url=http://<%= archiva_host %>:<%= archiva_port %>/archiva/repository/snapshots/"<%= ",\"mvn -U org.codehaus.mojo:sonar-maven-plugin:2.0:sonar -Dsonar.host.url=http://localhost:8083 -Dsonar.jdbc.url=jdbc:postgresql://localhost:5432/sonar -Dsonar.jdbc.driverClassName=org.postgresql.Driver -Dsonar.jdbc.username=maestro -Dsonar.jdbc.password=maestro\"" if sonar %>],"type":"Array","required":true},
                        "username":{"required":false,"type":"String","value":""},
                        "password":{"required":false,"type":"Password","value":""},
                        "web_path":{"required":false,"type":"String","value":""},
                        "use_ssl":{"required":true,"type":"Boolean","value":false},
                        "override_existing":{"required":true,"type":"Boolean","value":true}
                    },
                    "position": 1,
                    "source": null,
                    "task_id": 9,
                    "updated_at": "2012-02-08T12:50:34-05:00"
                },
                {
                    "composition_id": 7,
                    "created_at": "2011-10-28T20:09:26-04:00",
                    "id": 118,
                    "name": "wget latest snapshot",
                    "options": {"username":{"value":"admin","type":"String","required":true},"packaging":{"value":"war","type":"String","required":true},"path":{"value":"/tmp","type":"String","required":true},"password":{"value":"admin1","type":"Password","required":true},"url":{"value":"http://<%= archiva_host %>:<%= archiva_port %>/archiva/repository/snapshots/com/effectivemaven/centrepoint/webapp/1.0-SNAPSHOT/","type":"Url","required":true}},
                    "position": 2,
                    "source": null,
                    "task_id": 21,
                    "updated_at": "2012-02-08T12:50:34-05:00"
                },
                {
                    "composition_id": 7,
                    "created_at": "2012-02-07T23:07:12-05:00",
                    "id": 122,
                    "name": "ec2 provision",
                    "options": {"provision_command":{"value":"","type":"String","required":false},"flavor_id":{"value":"t1.micro","type":"String","required":true},"private_key_path":{"value":"config/lucee-demo-keypair.pem","type":"String","required":false},"bootstrap":{"value":"","type":"String","required":false},"availability_zone":{"value":"us-east-1a","type":"String","required":true},"key_name":{"value":"lucee-demo-keypair","type":"String","required":true},"ssh_commands":{"value":["mkdir -p /usr/share/tomcat6/.m2 && chown tomcat.tomcat /usr/share/tomcat6/.m2"],"type":"Array","required":false},"hostname":{"value":"","type":"String","required":false},"ssh_user":{"value":"root","type":"String","required":true},"type":{"value":"AWS","type":"String","required":true},"key_id":{"value":"<%= ec2_key_id %>","type":"Password","required":true},"image_id":{"value":"ami-61ab6708","type":"String","required":true},"user_data":{"value":"","type":"String","required":false},"deprovision_command":{"value":"","type":"String","required":false},"domain":{"value":"demo","type":"String","required":true},"key":{"value":"<%= ec2_key %>","type":"Password","required":true},"groups":{"value":"quick-start-1","type":"String","required":true}},
                    "position": 3,
                    "source": null,
                    "task_id": 18,
                    "updated_at": "2012-02-08T12:50:34-05:00"
                },
                {
                    "id": 35,
                    "options": {"port":{"value":8080,"required":true,"type":"Integer"},"ping_password":{"value":"maestro","required":false,"type":"Password"},"host":{"value":"#{fields[:instance_dns]}","required":false,"type":"String"},"open_timeout":{"value":60,"required":false,"type":"Integer"},"web_path":{"value":"/","required":true,"type":"String"},"ping_user":{"value":"maestro","required":false,"type":"String"},"timeout":{"value":60,"required":false,"type":"Integer"}},
                    "position": 4,
                    "name": "HTTP ping",
                    "created_at": "2012-02-07T23:07:12-05:00", 
                    "updated_at": "2012-02-08T12:50:34-05:00",
                    "composition_id": 7,
                    "task_id": 29,
                    "sources": []
                },
                {
                    "composition_id": 7,
                    "created_at": "2011-10-07T18:15:33-04:00",
                    "id": 111,
                    "name": "tomcat deploy",
                    "options": {"port":{"value":"8080","type":"Integer","required":true},"host":{"value":"#{fields[:instance_dns]}","type":"String","required":true},"web_path":{"value":"/centrepoint","type":"String","required":true},"path":{"value":"/tmp/webapp.war","type":"String","required":true},"password":{"value":"maestro","type":"Password","required":true},"user":{"value":"maestro","type":"String","required":true}},
                    "position": 5,
                    "source": null,
                    "task_id": 22,
                    "updated_at": "2012-02-08T12:50:34-05:00"
                },
                {
                    "composition_id": 7,
                    "created_at": "2011-10-07T16:57:09-04:00",
                    "id": 109,
                    "name": "confirmation",
                    "options": {"body":{"value":"Please Run QA Test On http://#{fields[:instance_dns]}:#{fields[:port]}#{fields[:web_path]}","required":true,"type":"String"},"fail_on_cancel":{"value":false,"required":false,"type":"Boolean"}},
                    "position": 6,
                    "source": null,
                    "task_id": 7,
                    "updated_at": "2012-02-08T12:50:34-05:00"
                },
                {
                    "composition_id": 7,
                    "created_at": "2012-02-08T12:05:54-05:00",
                    "id": 129,
                    "name": "ec2 deprovision",
                    "options": {"key_name":{"value":"lucee-demo-keypair","type":"String","required":true},"ssh_commands":{"value":["ls"],"type":"Array","required":true},"ssh_user":{"value":"root","type":"String","required":true},"key":{"value":"<%= ec2_key %>","type":"Password","required":true},"key_id":{"value":"<%= ec2_key_id %>","type":"Password","required":true}},
                    "position": 7,
                    "source": null,
                    "task_id": 19,
                    "updated_at": "2012-02-08T12:50:34-05:00"
                }
            ],
            "created_at": "2011-09-15T18:26:06-04:00",
            "description": "Centrepoint Build, Deploy and Provision For QA",
            "fail_type": "fast",
            "fail_type_id": 1,
            "id": 7,
            "name": "Centrepoint",
            "on_error_composition": null,
            "on_error_id": null,
            "reuse_agent": false,
            "schedule": "",
            "sources": [],
            "state": null,
            "tasks": [
            {
                "code": null, 
                "command": "/jenkinsplugin/build", 
                "created_at": "2011-08-04T18:31:28-04:00", 
                "dependencies": null, 
                "description": "Run A Set Of Work Steps In Jenkins, The Job Will Be Created If It Doesn't Exist<br>[host] Hostname Of The Jenkins Server<br>[port] Port Jenkins Is Running On<br>[username] Username for jenkins server<br>[password] Password for jenkins server<br>[job] Name Of The Jenkins Job<br>[web_path] context path of the jenkins server<br>[scm_url] Url Of The Source Code Repository<br>[steps] Set Of Steps To Be Executed By Jenkins", 
                "klass": null, 
                "language": null, 
                "name": "jenkins plugin", 
                "options": {
					  "host":{"required":true,"type":"String","value":"localhost"},
					  "port":{"required":false,"type":"Integer","value":8080},
					  "job":{"required":true,"type":"String","value":""},
					  "username":{"required":false,"type":"String","value":""},
					  "password":{"required":false,"type":"Password","value":""},
					  "use_ssl":{"required":true,"type":"Boolean","value":false},
					  "web_path":{"required":false,"type":"String","value":""},
					  "scm_url":{"required":false,"type":"Url","value":""},
					  "steps":{"required":false,"type":"Array","value":[]},
					  "override_existing":{"required":true,"type":"Boolean","value":false}
				}, 
                "pom": null, 
                "position": 1, 
			    "tool_name":"Build", 
                "type": "remote", 
                "updated_at": "2012-02-07T00:29:28-05:00"
            }
            ],
            "updated_at": "2012-02-07T00:29:49-05:00"
        },
        {
            "id": 39,
            "name": "Centrepoint Selenium",
            "description": "Centrepoint Selenium testing",
            "schedule": "",
            "state": null,
            "agent_facts": {},
            "reuse_agent": false,
            "created_at": "2011-09-15T18:26:06-04:00",
            "updated_at": "2012-03-13T18:16:08-04:00",
            "agent_pool_id": null,
            "on_error_id": null,
            "fail_type_id": 1,
            "composition_tasks": [
                {
                    "id": 420,
                    "options": {
                        "port":{"value":"<%= jenkins_port %>","type":"Integer","required":true},
                        "host":{"value":"localhost","type":"String","required":true},
                        "scm_url":{"value":"https://github.com/maestrodev/centrepoint.git","type":"Url","required":true},
                        "job":{"value":"Centrepoint","type":"String","required":true},
                        "steps":{"value":["mvn clean -U --batch-mode","mvn <%= goal %> -U --batch-mode -DrepositoryId=maestro-deploy -Durl=http://localhost:8082/archiva/repository/all -DaltDeploymentRepository=maestro-deploy::default::http://localhost:8082/archiva/repository/snapshots -Dproject.repository.url=http://localhost:8082/archiva/repository/snapshots/"<%= ",\"mvn -U org.codehaus.mojo:sonar-maven-plugin:2.0:sonar -Dsonar.host.url=http://localhost:8083 -Dsonar.jdbc.url=jdbc:postgresql://localhost:5432/sonar -Dsonar.jdbc.driverClassName=org.postgresql.Driver -Dsonar.jdbc.username=maestro -Dsonar.jdbc.password=maestro\"" if sonar %>],"type":"Array","required":true},
                        "username":{"required":false,"type":"String","value":""},
                        "password":{"required":false,"type":"Password","value":""},
                        "web_path":{"required":false,"type":"String","value":""},
                        "use_ssl":{"required":true,"type":"Boolean","value":false},
                        "override_existing":{"required":true,"type":"Boolean","value":true}
                    },
                    "position": 1,
                    "name": "jenkins plugin",
                    "created_at": "2011-10-06T15:48:24-04:00",
                    "updated_at": "2012-03-13T18:16:08-04:00",
                    "composition_id": 39,
                    "task_id": 9,
                    "sources": []
                },
                {
                    "id": 421,
                    "options": {
                  "port":{"value":"<%= jenkins_port %>","type":"Integer","required":true},
						"host":{"value":"localhost","type":"String","required":true},
						"scm_url":{"value":"https://github.com/maestrodev/centrepoint.git","type":"Url","required":true},
						"job":{"value":"CentrepointSelenium","type":"String","required":true},
						"steps":{"value":["cd centrepoint/modules/selenium-tests && mvn clean selenium:xvfb install -U --batch-mode -Djetty.port=8111"],"type":"Array","required":true},
				  		"username":{"required":false,"type":"String","value":""},
				  		"password":{"required":false,"type":"Password","value":""},
						"web_path":{"required":false,"type":"String","value":""},
						"use_ssl":{"required":true,"type":"Boolean","value":false},
						"override_existing":{"required":true,"type":"Boolean","value":true}
						},
                    "position": 2,
                    "name": "jenkins plugin",
                    "created_at": "2011-10-06T15:48:24-04:00",
                    "updated_at": "2012-03-13T18:16:08-04:00",
                    "composition_id": 39,
                    "task_id": 9,
                    "sources": []
                }
            ],
            "fail_type": "fast",
            "on_error_composition": null,
            "tasks": [
	            {
	                "code": null, 
	                "command": "/jenkinsplugin/build", 
	                "created_at": "2011-08-04T18:31:28-04:00", 
	                "dependencies": null, 
	                "description": "Run A Set Of Work Steps In Jenkins, The Job Will Be Created If It Doesn't Exist<br>[host] Hostname Of The Jenkins Server<br>[port] Port Jenkins Is Running On<br>[username] Username for jenkins server<br>[password] Password for jenkins server<br>[job] Name Of The Jenkins Job<br>[web_path] context path of the jenkins server<br>[scm_url] Url Of The Source Code Repository<br>[steps] Set Of Steps To Be Executed By Jenkins", 
	                "klass": null,
	                "language": null,
	                "name": "jenkins plugin",
	                "options": {
						  "host":{"required":true,"type":"String","value":"localhost"},
						  "port":{"required":false,"type":"Integer","value":8080},
						  "job":{"required":true,"type":"String","value":""},
						  "username":{"required":false,"type":"String","value":""},
						  "password":{"required":false,"type":"Password","value":""},
						  "use_ssl":{"required":true,"type":"Boolean","value":false},
						  "web_path":{"required":false,"type":"String","value":""},
						  "scm_url":{"required":false,"type":"Url","value":""},
						  "steps":{"required":false,"type":"Array","value":[]},
						  "override_existing":{"required":true,"type":"Boolean","value":false}
					},
	                "pom": null,
	                "position": 1,
				    "tool_name":"Build",
	                "type": "remote", 
	                "updated_at": "2012-02-07T00:29:28-05:00"
	            }
            ],
            "sources": []
        }
    ],
    "created_at": "2011-09-15T18:26:06-04:00",
    "description": "Centrepoint is a basic but useful application that sets up a dashboard of project information from Maven, Archiva and Continuum.",
    "home_url": "https://github.com/brettporter/centrepoint",
    "id": 3,
    "name": "Centrepoint",
    "scm_url": "https://github.com/brettporter/centrepoint.git",
    "updated_at": "2012-02-07T00:29:49-05:00"
}
