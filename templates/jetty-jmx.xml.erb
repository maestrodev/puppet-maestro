<?xml version="1.0"?>


<!-- =============================================================== -->
<!-- Configure the JVM JMX Server                                    -->
<!-- this configuration file should be used in combination with      -->
<!-- other configuration files.  e.g.                                -->
<!--    java -jar start.jar etc/jetty-jmx.xml etc/jetty.xml          -->
<!-- See jetty-jmx-mx4j.xml for a non JVM server solution            -->
<!-- =============================================================== -->
<Configure id="Server" class="org.eclipse.jetty.server.Server">

  <New id="ConnectorServer" class="org.eclipse.jetty.jmx.ConnectorServer">
    <Arg>
      <New class="javax.management.remote.JMXServiceURL">
        <Arg type="java.lang.String">rmi</Arg>
        <Arg type="java.lang.String" />
        <Arg type="java.lang.Integer"><SystemProperty name="jetty.jmxrmiport" default="1099"/></Arg>
        <Arg type="java.lang.String">/jndi/rmi://<SystemProperty name="jetty.jmxrmihost" default="<%= @rmi_server_hostname %>"/>:<SystemProperty name="jetty.jmxrmiport" default="<%= @jmxport %>"/>/jmxrmi</Arg>
      </New>
    </Arg>
    <Arg>org.eclipse.jetty.jmx:name=rmiconnectorserver</Arg>
    <Call name="start" />
  </New>

</Configure>


